---
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Time Series Analysis--Project
<br/>

In this project, you will apply various time series modeling techniques to forecast monthly auto sales in the U.S. using data from January 1995 to December 2020. The data set contains five variables listed below

* Month: a numeric variable that takes integer values from 1 to 12.
* Autosales: a numeric variable that shows the level of auto sale of a month.
* Inflation: a numeric variable that shows the change in price level in percentage.
* PPI: producer price index that measures of the change in prices that domestic producers receive for their goods and services.
* GasPrices: price of gasoline.

The project will consist of the following parts:

1. Exploratory Data Analysis and fit/hold-out sample split
2. Univariate Time-series Models:
    + 2.1 Constant Mean Model
    + 2.2 Random Walk Model
    + 2.3 Random Walk Model with Drift
    + 2.4 Seasonal Dummies and Trend
    + 2.5 Cyclical Trend Model
3. Time Series Regression Models:
    + 3.1 Discussion of independent variables. Correlation analysis and scatter plots
    + 3.2 Regression modeling with external predictors
4. Stochastic Time Series Models:
    + 4.1 Analysis of modeling of deterministic time series model residuals if they are stationary
    + 4.2 Analysis of modeling of regression model residuals
    + 4.3 ARIMA models for variable of interest (with seasonal ARIMA components if applicable)
5. Model comparisons 
<br/><br/>

Libraries
```{r}
# Import all your libraries here

```

Functions
```{r}
error_eval<-function(prediction,actual,type){
    
    # The function evaluates forecasting error based on predictions and actual values of the series
    # 
    # Inputs:
    # 
    # -predictions (numeric): a vector contains predicted values over time
    # -actual (numeric): the actual values of the series
    # -type (character): "mse" for mean squared error, "mape" for mean absolute percentage error
    #
    # Output:
    #
    # -error (numeric): a number shows the error based on the type specified.
    
    
}
```


Part 1: Exploratory Data Analysis and fit/hold-out sample split

1.1 Import raw data and show top 5 rows of the data set
```{r}
# your codes

```
1.2 Create the time series plot of the series Autosales from Jan 1995 to Dec 2020. 
```{r}
# your codes

```

1.3 Create monthly boxplot of the series Autosales.

```{r}
# your codes here

```



1.4 Create the SACF of Autosales including the first 24 lags

```{r}
# your codes here

```


1.5 Based on the time series plot, seasonal box plot, and the SACF, do you think the series is stationary? Please justify your answer in terms of trend, seasonality and autocorreltions.

```{r}
# your answer

```

1.6 Split the orginal dataframe into two dataframes: period of fit that contains the first 287 rows, call it "fit", and hold-out sample that contains the rest of the data, call it "hold_out".

```{r}
# your codes

```

Part 2: Univariate Time-series Models
<br/><br/>
2.1 *Constant Mean Model*
<br/><br/>
2.1.1 Perform a Box-perice test with 20 lags for Autosales using data belong to the period of fit.

```{r}
# your codes here

```

2.1.2 What is your conclusion of the test? Based on your conclusion, do you think the constant mean model is appropriate for the series?

```{r}
# your answer

```

2.1.3 Regardless of the answer to 2.1.2, please fit a constant mean model and plot the predicted mean and 95% confidence interval against the actual series

```{r}
# your codes here

```

2.1.4 Please calculate and display the mse and mape associated with the hold-out sample

```{r}
#your codes here

```

2.2 *Random Walk*
<br/><br/>
2.2.1 Please obtain the first-differenced series and display side-by-side the plot of the differenced series and its SACF. 

```{r}
# your codes here

```

2.2.2 Please perform a Box-pierce test for the differenced series. Do you think a random walk model is appropriate for autosale?

```{r}
# your answer
```

2.2.3 Regardless of your answer to 2.2.2, please fit a random walk model using the period of fit and plot the predicted values against the actual series.

```{r}
# your codes here
```

2.2.4 Using a Box-Pierce test, can you conclude that the residuals of the random walk model is WN?

```{r}
#your codes here
```

2.2.5 Please calculate and display the mse and mape of the random walk model using the hold-out sample

```{r}
# your codes here
```

2.3 *Random Walk with drift*
<br/><br/>

2.3.1 Suppose we want to fit the series using a random walk model with a drift term, please obtain the estimate of the drift term. 

```{r}
# your codes here
```

2.3.2 Do you think the drift is necessary?

```{r}
# your answer
```

2.3.3 Regardless of your answer to 2.2.2, please fit a random walk model with a drift term using the period of fit and plot the predicted values against the actual series.


```{r}
# your codes here
```

2.3.4 Please calculate and display the mse and mape of the random walk model using the hold-out sample

```{r}
# your codes here
```

2.3.5 Using a Box-Pierce test, can you conclude that the residuals of the random walk model with a drift is WN?

```{r}
#your codes here
```

2.4 *Seasonal Dummies and Trend*
<br/><br/>
2.4.1 Create a time series plot of the log-transformed series of Autosale

```{r}
#your codes here
```


2.4.2 Estimate a model for log-transformed Autosale with seasonal dummies and a linear trend

```{r}
#your codes here
```

2.4.3 Estimate a model for log-transformed Autosale with seasonal dummies and a polynomial trend with order 5.

```{r}
#your codes here
```

2.4.4 Based on adjusted R^2, do you prefer the model from 2.4.2 with a linear trend or the model from 2.4.3 with a polynomial trend?

```{r}
#your codes here
```

2.4.5 Based on the answer to 2.4.4, plot the predicted series against the actual series for the period of fit.

```{r}
# your codes here
```

2.4.6. Obtain the SACF of the residuals. Is the residual WN?

```{r}
# your codes here
```

2.4.7. Please calculate and display the mse and mape associated with the hold-out sample

```{r}
# your codes here
```

2.5 *Cyclical Trend Model*
<br/><br/>

2.5.1 Obtain the detrend series of Autosale (you are free to choose the order of polynomial for the time trend)

```{r}
#your codes here
```

2.5.2 Obtain and plot the periodogram of the detrended series.

```{r}
#your codes here
```

2.5.3 What are the most important periods based on the periodogram? Are there any "hidden" periods larger than 12?

```{r}
#your answer
```

2.5.4 Create the necessary since and cosine paris based on the periods you have identified in 2.5.3 and fit a cyclical model with polynomial trend (the order of the polynomial should be consistent with 2.5.1)

```{r}
# your codes here
```

2.5.5 Plot the predicted against the acutal series for the period of fit

```{r}
# your codes here
```


2.5.6 Obtain the SACF of the residuals. Is the residual WN?

```{r}
# your codes here
```

2.5.7 Please calculate and display the mse and mape associated with the hold-out sample

```{r}
# your codes here
```

Part 3: Time Series Regression Models
<br/><br/>

3.1 Create scatter plots and correlation estimates of all variables.
```{r}
# your codes here
```

3.2 Based on 3.1, do you think any of these predictors are informative in predicting autosale?

```{r}
# your answer
```

3.3 Estimate the regression model for autosale using all independent variables based on the period of fit.

```{r}
# your codes here
```

3.4 Plot the fitted values against the actual series for the period of fit.

```{r}
# your codes here
```

3.5 Obtain residuals of the model. Are the residuals WN? 

```{r}
# your codes here
```

3.6 Is the constant variance assumption for the residuals violated based on the white test?

```{r}
# your codes here
```

3.7 Is there any multicollinearity problem? If yes, what variable(s) would you like to drop from the model

```{r}
# your answer
```

3.8 Please calculate and display the mse and mape associated with the hold-out sample

```{r}
# your codes here
```

